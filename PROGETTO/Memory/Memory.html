<!DOCTYPE html>
<html>

    <head>

        <title>Memory</title>

        <meta charset="utf-8">

        <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 

        <style>
            table{
                border-spacing: 10px;
                margin:auto;
            }
        </style>

    </head>


    <body>

        <table></table>

        <script type = "text/javascript">

            //creazione tabella e comparsa tabella
            tab="";
			for (i=0; i<4;i++){ 
				tab+="<tr>";
				for (j=1;j<=6;j++)
					tab+="<td>"+"<img id='"+(i*6+j)+"' src='immagini/coperto.gif'>"+"</td>";
				tab+="</tr>";
				}
				
		
            //Funziona!!
            $(document).ready(function(){
                $("table").html(tab);

                // Mostra gli id delle celle nella console per verificare la corrispondenza tra vettoreGrosso e la tabella
                $("td").each(function(index){
                    console.log($(this).find("img").attr("id"));
                });
            });

            /*
                vettore con immagini, matrice con immagini totali da mettere nella tabella
                per ogni immagine del vettore estrarre due volte una posizione casuale nella matrice
            */

            //creo vettore con tutte le immagini del memory
            let images = [];
            for(let i = 0; i<12; i++){
                images[i]="immagini/mem_"+i+".gif";
            }
console.log(images);
            //invece di utilizzare una matrice, uso un vettore più lungo, per ottimizzare la "corrispondenza" tra vettore e vettoreGrosso e tra vettoreGrosso e tabella, 
            //che mi servirà per decidere le immagini nascoste dietro alla tabella
            let vettoreGrosso = [];
                //inizializzo tutto vettoreGrosso a 0
                for(let i=0; i<24; i++){
                    vettoreGrosso[i]=0; 
                }
                
            //inserisco nel vettorreGrosso(che sarebbe il campo di gioco) le immagini (2 volte per ognuna nel vettore)
            let posizioneEstratta = 0;
            for(let j = 0; j<((images.length)); j++){
                for(let y = 0; y<2; y++){
                    do{
                        posizioneEstratta = Math.floor(Math.random()*24); //estraggo un numero da 0 a 23 (tot = 24), che sarà la posizione nel vettorerGrosso in cui inserirò l'immagine del vettore images
  
                    }while(vettoreGrosso[posizioneEstratta]!=0);
                    vettoreGrosso[posizioneEstratta]=images[j]; //se la posizione estratta non è occupata, inserisco l'immagine nel vettoreGrosso  
                }
            }

            //quando l'utente schiaccia su un'immagine coperta, questa cambia e diventa la sua corrispettiva del vettoreGrosso
            $("table").on("click", "img", scopri);
            let evento;
            function scopri(event){
                evento = event.target;
                console.log("cliccato sull'immagine con l'ID:", event.target.id); //controllo se gli id sono corretti
                let index = parseInt(event.target.id)-1;
                $(evento).attr("src", vettoreGrosso[index]);
            }
            
            function ricopri(){
                $(evento).attr("src", "immagini/coperto.gif");
            }
        </script>
    </body>
</html>