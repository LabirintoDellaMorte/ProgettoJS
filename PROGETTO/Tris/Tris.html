<!doctype html>

<html>
<head>
<title>Tris</title>
<meta charset="UTF-8">

<style>
	td{
		border:3px solid black;
		border: collapse;
		text-align:center;
		height: 70px;
		width: 70px;
		font-size: 40px;
		background-color: grey;
	}
	
	th{
		border:3px solid black;
		text-align:center;
		height: 70px;
		width: 70px;
		font-size: 70px;
		background-color: grey;
	}
	
	tr{
		border: none;
	}
	
	table{
		width: 400px;
		height: 550px;
		margin: auto;
	}
</style>

</head>

<body>

		<table>
			<tr>
				<th colspan="3" id="titolo">X</th>
			</tr>
			
			<tr>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			 
			<tr>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			
			<tr>
				<td></td>
				<td></td>
				<td></td>
			</tr>
		</table>
		
		<button id="reset">Reset</button>

   
   
    <script>
	
		//variabili
		let caselle = document.getElementsByTagName("td");
		let titolo = document.getElementById("titolo");
		let win = false; //variabile utilizzata per controllare se qualcuno ha gia vinto o no (usata anche nel pareggio)
		
		
		//onMouseOver per tutti i td
		for(var i=0; i<(caselle.length); i++)
		{
			caselle[i].onmouseover=rosso;
			caselle[i].onmouseout=torna;
			caselle[i].onclick=cambioTurno;
		}
		
		function rosso(e)
		{
			e.target.style.backgroundColor="red";
		}
		
		function torna(e)
		{
			e.target.style.backgroundColor="grey";
		}
		
		
		//cambio del titolo e inserimento del segno nel posto scelto
		function cambioTurno(e)
		{ 
			if(e.target.innerHTML=="")
			{
				if(titolo.innerHTML=="X") 
				{
					titolo.innerHTML="O";
					e.target.innerHTML="X"
				}
				else 
				{
					titolo.innerHTML="X";
					e.target.innerHTML="O"
				}
			}
			else alert("CELLA GIA' SCELTA!");

			checkVittoria();
			checkPareggio();
		}
		
		
		function checkVittoria() { //controllo condizioni di vittoria e decisione del vincitore, se presente
			win = false;
			let simbolo = 'X';

			for (let i = 0; i<2; i++) { 
				if (i === 1) simbolo = 'O';
				if (caselle[0].innerHTML === simbolo && caselle[1].innerHTML === simbolo && caselle[2].innerHTML === simbolo) {
					winner = simbolo;
					win = true;
				}
				else if (caselle[3].innerHTML === simbolo && caselle[4].innerHTML === simbolo && caselle[5].innerHTML === simbolo){
					winner = simbolo;
					win = true;
				}
				else if (caselle[6].innerHTML === simbolo && caselle[7].innerHTML === simbolo && caselle[8].innerHTML === simbolo){
					winner = simbolo;
					win = true;
				}
				else if (caselle[0].innerHTML === simbolo && caselle[3].innerHTML === simbolo && caselle[6].innerHTML === simbolo){
					winner = simbolo;
					win = true;
				}
				else if (caselle[1].innerHTML === simbolo && caselle[4].innerHTML === simbolo && caselle[7].innerHTML === simbolo){
					winner = simbolo;
					win = true;
				}
				else if (caselle[2].innerHTML === simbolo && caselle[5].innerHTML === simbolo && caselle[8].innerHTML === simbolo){
					winner = simbolo;
					win = true;
				}
				else if (caselle[0].innerHTML === simbolo && caselle[4].innerHTML === simbolo && caselle[8].innerHTML === simbolo){
					winner = simbolo;
					win = true;
				}
				else if (caselle[2].innerHTML === simbolo && caselle[4].innerHTML === simbolo && caselle[6].innerHTML === simbolo){
					winner = simbolo;
					win = true;
				}
			}

			if (win) {
				alert("VITTORIA DI " + winner + "!"); //alert per vittoria
			}
		}

		function checkPareggio(){
			if(!win){
				let pareggio=true;
				for (let i in caselle) {
					if(caselle[i].innerHTML == "")pareggio=false;
				}
				if(pareggio)alert("Pareggio!");
			}
		}


		document.getElementById("reset").onclick = resetTotale; //reset
		
		function resetTotale() {
			for (let i in caselle) {
				caselle[i].innerHTML = "";
			}
		}

		
    </script>
</body>
</html>