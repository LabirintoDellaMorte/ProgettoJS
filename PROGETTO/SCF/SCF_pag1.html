<html>
    <head>
        <title>Carta, forbice, sasso</title>

        <style>
            body{

                background-color: black;
                color: white;
            }

            div{
                text-align: center;
            }

            #container1{
                margin-top: 100px;
                width: 100%;
                
            }
            #turn{
                width: 70%;
            }      
            
            #container2{
                margin-top: 100px;
                width: 90%;
                margin: auto;
                
            }
            .butt{
                width: 30%;                
            }

        </style>
    </head>

    <body id="body">
        
        <div id="container1">
            <img id='turn' src="gioco/scritte/turnFull.png">
        </div>
        
 
        
        <br>

        <div id="container2">
            <img class='butt' id="sasso" src="gioco/butt/s.png">
            <img class='butt' id="carta" src="gioco/butt/c.png">
            <img class='butt' id="forbice" src="gioco/butt/f.png">
        </div>
        
        <div id="space"></div>
        <br>

        <p id="scroll">Mario ha scelto:</p>
        <p id="sceltaMario"></p>

        <br>

        <p>Risultato:</p>
        <p id="risultato"></p>

        <br><br>

      
        <p id="pMario"></p>
        <p id="pUtente"></p>

        <button id="reset">Ricomincia</button>

        
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {

                scroll_to('body');

                for(let i=0; i<100; i++){
                    document.getElementById('space').innerHTML += "<br>"
                }

                //variabili
                let sceltaMario;
                let sceltaUtente;
                let punteggioMario = 0;
                let punteggioUtente = 0;

                $('.butt').click(function(){/* al click su un pulsante la pagina si muove verso il basso per vedere il risultato */

                    scroll_to('scroll');
                })

                function scroll_to(id) {

                    $('html,body').animate({
                        scrollTop: $('#'+id).offset().top
                    },'slow');
                }
                
                //---------Assegno un valore alla variabile sceltaUtente in base a quello che l'utente appunto sceglie premento gli appositi bottoni----------
              $("#sasso").click(function(){
                    sceltaUtente=0;
                })
                $("#carta").click(function(){
                    sceltaUtente=1;
                })
                $("#forbice").click(function(){
                    sceltaUtente=2;
                })

                //--------------------Scrivo sullo schermo quello che ha scelto mario in base al numero estratto casualmente tra 0,1,2------------------------
                $(".butt").click(function(){
                    sceltaMario = Math.floor((Math.random()*3));
                    
                    if(sceltaMario == 0){
                        $("#sceltaMario").text("Sasso!");
                    }
                    else{
                        if(sceltaMario == 1){
                            $("#sceltaMario").text("Carta!");
                        }
                        else{
                            if(sceltaMario == 2){
                                $("#sceltaMario").text("Forbice!");
                            }
                        }
                    }
                    risultato();
                });
                
                
                //--------------------------Determino chi ha vinto in base al valore delle due variabili che ho dichiarato all'inizio------------------------
                function risultato(){
                    if(sceltaMario == sceltaUtente){
                        $("#risultato").text("Pareggio!");
                    }
                    else{
                        if(sceltaMario == 0 && sceltaUtente == 1){
                            $("#risultato").text("Hai vinto!");
                            punteggioUtente++;
                        }
                        else{
                            if(sceltaMario == 0 && sceltaUtente == 2){
                                $("#risultato").text("Ha vinto Mario!");
                                punteggioMario++;
                            }
                            else{
                                if(sceltaMario == 1 && sceltaUtente == 0){
                                    $("#risultato").text("Ha vinto Mario!");
                                    punteggioMario++;
                                }
                                else{
                                    if(sceltaMario == 1 && sceltaUtente == 2){
                                        $("#risultato").text("Hai vinto!");
                                        punteggioUtente++;
                                    }
                                    else{
                                        if(sceltaMario == 2 && sceltaUtente == 0){
                                            $("#risultato").text("Hai vinto!");
                                            punteggioUtente++;
                                        }
                                        else{
                                            if(sceltaMario == 2 && sceltaUtente == 1){
                                                $("#risultato").text("Ha vinto Mario!");
                                                punteggioMario++;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    $("#pMario").text("Punteggio Mario:"+punteggioMario);
                    $("#pUtente").text("Tuo punteggio:"+punteggioUtente);

                    //-----------------in base al primo che arriva a tre punti, determino chi ha vinto definitivamente la partita-----------------
                    if(punteggioMario == 3){
                        alert("ha vinto Mario :(");
                    } 
                    else {
                        if(punteggioUtente == 3) alert("!HAI VINTO! :)");
                    }


                    //-----------------funzione per azzerare tutto e ripartire da capo come se l'utente aggiornasse la pagina-----------------
                    $("#reset").click(function(){
                        sceltaMario = 0;
                        sceltaUtente = 0;
                        punteggioMario = 0;
                        punteggioUtente = 0;

                        $("#pMario").text("");
                        $("#pUtente").text("");
                        $("#risultato").text("");
                        $("#sceltaMario").text("");
                    })
                }
                

            });

        </script>
    </body>
</html>